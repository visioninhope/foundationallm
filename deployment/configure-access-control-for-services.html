<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Configure access control for services | FoundationaLLM </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Configure access control for services | FoundationaLLM ">
      
      <link rel="icon" href="../media/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/solliancenet/foundationallm/blob/main/docs/deployment/configure-access-control-for-services.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../media/fllm-icon.svg" alt="FoundationaLLM">
            FoundationaLLM
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="configure-access-control-for-services">Configure access control for services</h1>

<p>FoundationaLLM takes a least privilege approach to access control. This means that by default, users have no access to any resources. You must explicitly grant access to users for each resource they need to access. This guide walks you through the process of granting access to users as needed.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>You have a FoundationaLLM solution <a href="deployment-starter.html">deployed</a> and running.</li>
<li>You have a user account with the <code>Contributor</code> role on the Azure resource group or subscription where the solution is deployed.</li>
</ul>
<h2 id="azure-app-configuration-service">Azure App Configuration service</h2>
<p>The <a href="https://learn.microsoft.com/azure/azure-app-configuration/overview">Azure App Configuration service</a> provides FoundationaLLM solution components with a centralized location to store and manage application settings and feature flags. Role-based access controls (RBAC) are used to control access to the App Configuration service for managing settings and feature flags, as well as accessing them. The deployment scripts assign access controls to service accounts to allow them to read application settings and feature flags. You can use the same approach to grant access to users as needed.</p>
<h3 id="app-configuration-roles">App Configuration roles</h3>
<p>The following table summarizes the roles FoundationaLLM uses for the App Configuration service:</p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Description</th>
<th>Target Users</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>App Configuration Data Reader</code></td>
<td>Allows users to read settings and feature flags.</td>
<td>The system-assigned managed identities for the <code>api</code> services and any developers or admins that need to run the solution locally.</td>
</tr>
<tr>
<td><code>App Configuration Data Owner</code></td>
<td>Allows users to read and write settings and feature flags.</td>
<td>Administrators that need to manage settings and feature flags.</td>
</tr>
</tbody>
</table>
<h3 id="grant-access-to-the-app-configuration-service">Grant access to the App Configuration service</h3>
<p>Use the steps below to grant access to the App Configuration service:</p>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/">Azure portal</a> as at least a Contributor.</p>
</li>
<li><p>Navigate to the resource group where the solution is deployed.</p>
<div class="NOTE">
<h5>Note</h5>
<p>If you performed an Azure Container Apps (ACA) or Azure Kubernetes Service (AKS) deployment, you will see an extra Resource Group that starts with <code>ME_</code> or <code>MC_</code> in addition to the Resource Group defined during the deployment. You will need to navigate to the Resource Group that <strong>does not start with</strong> <code>ME_</code> or <code>MC_</code> to access the App Configuration resource.</p>
</div>
</li>
<li><p>Select the <strong>App Configuration</strong> resource. The name should end with <code>-appconfig</code>.</p>
</li>
<li><p>Select <strong>Access Control (IAM)</strong> in the left-hand menu.</p>
<p><img src="media/appconfig-access-control-link.png" alt="The Access Control (IAM) menu item is highlighted."></p>
</li>
<li><p>Select <strong>+ Add</strong> and then <strong>Add role assignment</strong>.</p>
<p><img src="media/add-role-assignment-link.png" alt="The add role assignment menu item is highlighted."></p>
</li>
<li><p>Select the <strong>App Configuration Data Reader</strong> or the <strong>App Configuration Data Owner</strong> role and then select <strong>Next</strong>.</p>
<p><img src="media/appconfig-add-role-assignment-role.png" alt="The App Configuration Data Reader role is selected and the Next button is highlighted."></p>
</li>
<li><p>Select the <strong>+ Select members</strong> link, search for user or group you want to grant access to, select the member to add them to the <em>Selected members</em> list, and then select <strong>Next</strong>.</p>
<p><img src="media/appconfig-add-role-assignment-members.png" alt="Each of the described steps are highlighted and numbered in order within the screenshot."></p>
</li>
<li><p>Select <strong>Review + assign</strong> to complete the assignment.</p>
</li>
</ol>
<h2 id="azure-key-vault-service">Azure Key Vault service</h2>
<p>The <a href="https://learn.microsoft.com/azure/key-vault/overview">Azure Key Vault service</a> provides FoundationaLLM solution components with a centralized location to store and manage secrets. Role-based access controls (RBAC) are used to control access to the Key Vault service for managing secrets, as well as accessing them. The deployment scripts assign access controls to service accounts to allow them to read secrets. You can use the same approach to grant access to users as needed.</p>
<h3 id="key-vault-roles">Key Vault roles</h3>
<p>The following table summarizes the roles FoundationaLLM uses for the Key Vault service:</p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Description</th>
<th>Target Users</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Key Vault Secrets User</code></td>
<td>Allows users to read secrets.</td>
<td>The system-assigned managed identities for the <code>api</code> services and any developers or admins that need to run the solution locally.</td>
</tr>
<tr>
<td><code>Key Vault Secrets Officer</code></td>
<td>Allows users to read and write secrets.</td>
<td>Administrators that need to manage secrets.</td>
</tr>
</tbody>
</table>
<h3 id="grant-access-to-the-key-vault-service">Grant access to the Key Vault service</h3>
<p>Use the steps below to grant access to the Key Vault service:</p>
<ol>
<li><p>Sign in to the <a href="https://portal.azure.com/">Azure portal</a> as at least a Contributor.</p>
</li>
<li><p>Navigate to the resource group where the solution is deployed.</p>
<div class="NOTE">
<h5>Note</h5>
<p>If you performed an Azure Container Apps (ACA) or Azure Kubernetes Service (AKS) deployment, you will see an extra Resource Group that starts with <code>ME_</code> or <code>MC_</code> in addition to the Resource Group defined during the deployment. You will need to navigate to the Resource Group that <strong>does not start with</strong> <code>ME_</code> or <code>MC_</code> to access the App Configuration resource.</p>
</div>
</li>
<li><p>Select the <strong>Key Vault</strong> resource. The name should end with <code>-kv</code>.</p>
</li>
<li><p>Select <strong>Access Control (IAM)</strong> in the left-hand menu.</p>
<p><img src="media/keyvault-access-control-link.png" alt="The Access Control (IAM) menu item is highlighted."></p>
</li>
<li><p>Select <strong>+ Add</strong> and then <strong>Add role assignment</strong>.</p>
<p><img src="media/add-role-assignment-link.png" alt="The add role assignment menu item is highlighted."></p>
</li>
<li><p>Select the <strong>Key Vault Secrets User</strong> or the <strong>Key Vault Secrets Officer</strong> role and then select <strong>Next</strong>.</p>
<p><img src="media/keyvault-add-role-assignment-role.png" alt="The Key Vault Secrets User role is selected and the Next button is highlighted."></p>
</li>
<li><p>Select the <strong>+ Select members</strong> link, search for user or group you want to grant access to, select the member to add them to the <em>Selected members</em> list, and then select <strong>Next</strong>.</p>
<p><img src="media/keyvault-add-role-assignment-members.png" alt="Each of the described steps are highlighted and numbered in order within the screenshot."></p>
</li>
<li><p>Select <strong>Review + assign</strong> to complete the assignment.</p>
</li>
</ol>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/solliancenet/foundationallm/blob/main/docs/deployment/configure-access-control-for-services.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © FoundationaLLM. All rights reserved. | Find out more about FoundationaLLM at <a href="https://foundationallm.ai">foundationallm.ai</a>.
        </div>
      </div>
    </footer>
  </body>
</html>
